<!DOCTYPE html>
<html>
 <head> 
  <title>Progetto Finale</title> 
  <style>
    body {
      margin: 0;
      overflow: hidden;
    }

    #stats {  /* Align stats top-left */
      position: absolute;
      left: 0px;
      top: 0px;
    }
  </style> 
  </head> 
  <body>
    <!-- JavaScript libraries -->
  <script src="../final-project/scripts/libs/jquery.min.js"></script> 

   
 
  <script src="../final-project/scripts/libs/three.min.js"></script>
  <script src="../final-project/scripts/libs/Stats.min.js"></script>
  <script src="../final-project/scripts/libs/dat.gui.min.js"></script>
  <script src="../final-project/scripts/libs/TrackballControls.js"></script>
  <script src="../final-project/scripts/libs/tween.min.js"></script>
  <script src="../final-project/scripts/floors.js"></script>
  <script src="../final-project/scripts/windows.js"></script>
  <script src="../final-project/scripts/doors.js"></script>
  <script src="../final-project/scripts/walls.js"></script>
  <script src="../final-project/scripts/libs/OBJLoader.js"></script>
  <script src="../final-project/scripts/libs/MTLLoader.js"></script>
  <script src="../final-project/scripts/libs/OBJMTLLoader.js"></script>


 


    <!-- Javascript code that runs our Three.js examples --> 
    <script>
      // once everything is loaded, we run our Three.js stuff.
      $(function () {
      var stats = initStats();

      // create a scene, that will hold all our elements such as objects, cameras and lights.
      var scene = new THREE.Scene();

      // create a camera, which defines where we're looking at.
      var camera = new THREE.PerspectiveCamera(50, window.innerWidth / window.innerHeight, 0.1, 1000);

      // create trackball controls
      var trackballControls = new THREE.TrackballControls(camera);

      // create a render and set the size
      var webGLRenderer = new THREE.WebGLRenderer();
      webGLRenderer.setClearColor(new THREE.Color(0xaaaaff, 1.0));
      webGLRenderer.setSize(window.innerWidth, window.innerHeight);


      

      // position and point the camera to the center of the scene
      camera.position.set(0,-20,20);
      camera.lookAt(new THREE.Vector3(0, 0, 1));

     



      light = new THREE.DirectionalLight( 0xffffff );
      light.position.set( -5,7,10 );
      light.intensity = 2.5;
      scene.add( light );
      
      light1 = new THREE.DirectionalLight( 0xffffff );
      light1.position.set( 5, -7, 10 );
      light1.intensity = 2.5;
      scene.add( light1 );

      

      // add axis helper
      var axisHelper = new THREE.AxisHelper(1);
      axisHelper.visible = true;
      scene.add(axisHelper);



      //prato
      var grass = mkPlaneTexture(30,20,"grass.jpg",7.5,5,-.01);
      grass.material.side = THREE.DoubleSide;
      scene.add(grass);

      //floor
      var floors = mkFloors();
      scene.add(floors);

      //windows
      var windows = mkWindows();
      scene.add(windows);

      //doors
      var doors = mkDoors();
      scene.add(doors);
      
      //walls
      var walls = mkWalls();
      scene.add(walls);

      

     
      /*tavolo salone*/
      var loader = new THREE.OBJMTLLoader();
      loader.addEventListener('load', function (event) {

        var object = event.content;

        
        object.scale.set(.5, .6, .65);
        object.position.set(12.85,4.2  ,.2)
        mesh = object;
        scene.add(mesh);

        object.rotation.x = Math.PI/2;
        object.rotation.y = Math.PI/2;
        //object.rotation.y = -1.3;
      });


      loader.load(
        '../final-project/StylishDesk/StylishDesk.obj', 
        '../final-project/StylishDesk/StylishDesk.mtl', 
        {side: THREE.DoubleSide}
      );

/*
      /*auto*/
      /*var loader = new THREE.OBJMTLLoader();
      loader.addEventListener('load', function (event) {

        var object = event.content;

        
        object.scale.set(.35,.35,.35);
        object.position.set(10.85,-1  ,1.05)
        mesh = object;
        scene.add(mesh);

        object.rotation.x = Math.PI/2;
        object.rotation.y = Math.PI/2;
        //object.rotation.z = Math.PI/4;
      });


      loader.load(
        '../final-project/458-Italia/Ferrari-458-Italia.obj', 
        '../final-project/458-Italia/Ferrari-458-Italia.mtl', 
        {side: THREE.DoubleSide}
      );
*/

      /*tavolo cucina*/
      var loader = new THREE.OBJLoader();
      loader.load('../final-project/tavolo-cucina/tablefinal.obj', function (obj) {
        var material = new THREE.MeshLambertMaterial({color: 0x999999, shading: THREE.FlatShading, side: THREE.DoubleSide});

        obj.traverse(function (child) {
          if (child instanceof THREE.Mesh) {
            child.material = material;
          }
        });

        mesh = obj;
        obj.scale.set(0.01,0.014,0.02);
        obj.rotation.x = Math.PI/2;
        obj.position.set(10,7,0.2);
        obj.receiveShadow = true;
        obj.castShadow = true;

        scene.add(obj);
      });




      
       




   
      






    
      



     
     

       

      // add the output of the renderer to the html element
      $('body').append(webGLRenderer.domElement);

      //oggetti
      var loader = new THREE.OBJLoader();
      loader.load('../final-project/casa.obj', function (obj) {
        var material = new THREE.MeshLambertMaterial({color: 0x999999, shading: THREE.FlatShading, side: THREE.DoubleSide});

        obj.traverse(function (child) {
          if (child instanceof THREE.Mesh) {
            child.material = material;
          }
        });

        mesh = obj;
        //obj.scale.set(10, 10, 10);
        //obj.rotation.x = -Math.PI/2;
        //obj.position.set(0,0,0);
        obj.receiveShadow = true;
        obj.castShadow = true;

        scene.add(obj);
      });


      

      // call the render function
      var step = 0;

      // setup the control gui
      var controls = new function () {};

      var gui = new dat.GUI();
      var mesh;

      


      



     


      render();

      function render() {
        stats.update();
        trackballControls.update();
        TWEEN.update();


        // if (mesh) {
        //   mesh.rotation.y += 0.006;
        //   mesh.rotation.x += 0.006;
        // }

        // render using requestAnimationFrame
        requestAnimationFrame(render);
        webGLRenderer.render(scene, camera);
      }

      function initStats() {
        var stats = new Stats();
        stats.setMode(0); // 0: fps, 1: ms
        $('body').append(stats.domElement);
        return stats;
      }

    });
    </script>  
 </body>
</html>
